# RSA 암호화 로그인/회원가입 테스트 가이드

## 테스트 준비

1. **백엔드 서버 재시작**
   - IDE에서 `AuthApplication.java` 중지 후 다시 실행
   - 콘솔에서 "Started AuthApplication" 메시지 확인

2. **프론트엔드 서버 확인**
   - http://localhost:3000 접속 가능 확인

## 테스트 방법

### 방법 1: React 웹 인터페이스 테스트
1. 브라우저에서 http://localhost:3000 접속
2. "회원가입" 탭 클릭
3. 테스트 데이터 입력:
   - 사용자명: testuser1
   - 이메일: test1@example.com
   - 비밀번호: testpass123
4. 회원가입 버튼 클릭
5. 성공 메시지 확인
6. "로그인" 탭으로 이동
7. 같은 사용자명과 비밀번호로 로그인
8. 개발자 도구(F12) > Network 탭에서 요청 확인:
   
   **Network 탭 확인 방법:**
   
   a) **개발자 도구 열기**
      - F12 키 또는 Ctrl+Shift+I (Windows)
      - Command+Option+I (Mac)
      - 또는 우클릭 → "검사" 선택
   
   b) **Network 탭 선택**
      - 상단 메뉴에서 "Network" 또는 "네트워크" 탭 클릭
      - "Clear" 버튼(🚫)을 클릭하여 이전 요청 제거
      - "Preserve log" 체크박스 선택 (페이지 이동 시에도 로그 유지)
   
   c) **회원가입/로그인 시 발생하는 요청 확인**
      
      **1) public-key 요청 확인:**
      - Name: `public-key`
      - Method: `GET`
      - Status: `200`
      - URL: `http://localhost:8080/api/auth/public-key`
      - Response 탭 클릭 시 표시되는 내용:
        ```json
        {
          "publicKey": "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA..."
        }
        ```
   
      **2) register 또는 login 요청 확인:**
      - Name: `register` 또는 `login`
      - Method: `POST`
      - Status: `200`
      - Headers 탭에서 Content-Type: `application/json` 확인
      - **Payload 탭** 또는 **Request 탭** 클릭하여 전송된 데이터 확인:
        ```json
        {
          "username": "testuser1",
          "email": "test1@example.com",
          "encryptedPassword": "긴 암호화된 문자열 (예: bXkgZW5jcnlwdGVkIHBhc3N3b3Jk...)",
          "password": null
        }
        ```
   
   d) **RSA 암호화 적용 확인 포인트:**
      - ✅ `encryptedPassword` 필드에 긴 암호화된 문자열이 있어야 함
      - ✅ `password` 필드는 `null`이어야 함 (평문 비밀번호가 전송되지 않음)
      - ✅ `public-key` 요청이 `register`/`login` 요청보다 먼저 발생
      - ✅ 암호화된 비밀번호는 매번 다른 값 (같은 비밀번호라도)
   
   e) **Response 확인:**
      - Response 탭에서 서버 응답 확인:
        ```json
        {
          "token": "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0dXNlcjEi...",
          "username": "testuser1",
          "message": "Registration successful" 또는 "Login successful"
        }
        ```

### 방법 2: HTML 테스트 페이지
1. `test-rsa-encryption.html` 파일을 브라우저에서 열기
2. 순서대로 테스트:
   - "공개키 요청" 버튼 클릭
   - "암호화 테스트" 버튼 클릭
   - "RSA 암호화로 회원가입" 버튼 클릭
   - "RSA 암호화로 로그인" 버튼 클릭

### 방법 3: 커맨드라인 테스트
```bash
cd C:\Users\User\Downloads\회원가입
node test-api.js
```

## 확인 사항

### RSA 암호화 동작 확인
1. 개발자 도구에서 Network 탭 열기
2. 로그인/회원가입 시 요청 확인:
   - `/api/auth/public-key` 요청이 먼저 발생
   - `/api/auth/register` 또는 `/api/auth/login` 요청에서 `encryptedPassword` 필드 확인
   - `password` 필드는 null이어야 함

### 예상 요청 형식
```json
{
  "username": "testuser1",
  "email": "test1@example.com",
  "encryptedPassword": "긴 암호화된 문자열...",
  "password": null
}
```

## 문제 해결

### "공개키 요청 실패" 오류
- 백엔드 서버가 실행 중인지 확인
- PublicKeyResponse.java 수정 후 서버 재시작 필요

### "Failed to decrypt password" 오류
- 공개키가 올바르게 받아졌는지 확인
- JSEncrypt 라이브러리가 로드되었는지 확인

### CORS 오류
- 백엔드가 http://localhost:8080에서 실행 중인지 확인
- 프론트엔드가 http://localhost:3000에서 실행 중인지 확인